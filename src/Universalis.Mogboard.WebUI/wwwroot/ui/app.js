(()=>{var e={646:function(e){e.exports=function(){"use strict";function e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}return function t(r,n){function a(t,a,i){if("undefined"!=typeof document){"number"==typeof(i=e({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var s in i)i[s]&&(o+="; "+s,!0!==i[s]&&(o+="="+i[s].split(";")[0]));return document.cookie=t+"="+r.write(a,t)+o}}return Object.create({set:a,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],n={},a=0;a<t.length;a++){var i=t[a].split("="),o=i.slice(1).join("=");try{var s=decodeURIComponent(i[0]);if(n[s]=r.read(o,s),e===s)break}catch(e){}}return e?n[e]:n}},remove:function(t,r){a(t,"",e({},r,{expires:-1}))},withAttributes:function(r){return t(this.converter,e({},this.attributes,r))},withConverter:function(r){return t(e({},this.converter,r),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(r)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}()}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}(()=>{"use strict";function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const t=new(function(){function t(){var e=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.icons={success:"xiv-SymbolCheck",error:"xiv-SymbolCross",warning:"xiv-SymbolAlert",info:"xiv-SymbolQuestion"},this.forceOpen=!1,this.ui=$(".popup"),this.ui.on("click",(function(t){e.close()}))}var r,n;return r=t,(n=[{key:"success",value:function(e,t){this.setPopupIcon("success").setTitle(e).setMessage(t).open()}},{key:"error",value:function(e,t){this.setPopupIcon("error").setTitle(e).setMessage(t).open()}},{key:"warning",value:function(e,t){console.log("title = "+e),this.setPopupIcon("warning").setTitle(e).setMessage(t).open()}},{key:"info",value:function(e,t){this.setPopupIcon("info").setTitle(e).setMessage(t).open()}},{key:"setTitle",value:function(e){return this.ui.find("h1").html(e),this}},{key:"setMessage",value:function(e){return this.ui.find("p").html(e),this}},{key:"open",value:function(){return this.ui.addClass("open"),this}},{key:"close",value:function(){if(!this.forceOpen)return this.ui.removeClass("open"),this}},{key:"setForcedOpen",value:function(e){this.forceOpen=e,e?this.ui.find(".popup_close_button").hide():this.ui.find(".popup_close_button").show()}},{key:"setPopupIcon",value:function(e){return this.ui.find(".popup_icon").attr("data-type",e),this.ui.find(".popup_icon i").removeClass(),this.ui.find(".popup_icon i").addClass(this.icons[e]),this}}])&&e(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}());function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const a=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.modalCover=$(".modal_cover"),this.modelCloseButton=$(".modal_close_button")}var t,r;return t=e,(r=[{key:"add",value:function(e,t){var r=this;t.on("click",(function(t){r.modalCover.addClass("open"),e.addClass("open")})),this.modalCover.on("click",(function(t){r.modalCover.removeClass("open"),e.removeClass("open")})),this.modelCloseButton.on("click",(function(t){r.modalCover.removeClass("open"),e.removeClass("open")}))}},{key:"close",value:function(e){this.modalCover.removeClass("open"),e.removeClass("open")}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}());function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=r(646);const s=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uiModal=$(".modal_settings"),this.uiModalButton=$(".btn-settings"),this.defaultLanguage="en",this.defaultTimezone=Intl.DateTimeFormat().resolvedOptions().timeZone,this.defaultLeftNav="off",this.defaultHomeWorld="no","undefined"===this.defaultTimezone&&(this.defaultTimezone="Europe/London"),this.storageKeyServer="mogboard_server",this.storageKeyLanguage="mogboard_language",this.storageKeyTimezone="mogboard_timezone",this.storageKeyLeftNav="mogboard_leftnav",this.storageKeyHomeWorld="mogboard_homeworld",this.server=this.getServer(),this.language=this.getLanguage(),this.timezone=this.getTimezone(),this.leftnav=this.getLeftNav(),this.homeworld=this.getHomeWorld()}var r,n;return r=e,(n=[{key:"init",value:function(){var e=this,t=this.getServer(),r=this.getLanguage(),n=this.getTimezone(),a=this.getLeftNav(),i=this.getHomeWorld();r=r||this.defaultLanguage,n=n||this.defaultTimezone,a=a||this.defaultLeftNav,i=i||this.defaultHomeWorld,null===t||0===t.length?setTimeout((function(){e.uiModalButton.trigger("click")}),500):this.setServer(t),this.setLanguage(r),this.setTimezone(n),this.setLeftNav(a),this.setHomeWorld(i),this.uiModal.find("select.servers").val(t),this.uiModal.find("select.languages").val(r),this.uiModal.find("select.timezones").val(n),this.uiModal.find("select.leftnav").val(a),this.uiModal.find("select.homeworld").val(i)}},{key:"watch",value:function(){var e=this;a.add(this.uiModal,this.uiModalButton),this.uiModal.find(".servers").on("change",(function(t){e.setServer($(t.currentTarget).val())})),this.uiModal.find(".languages").on("change",(function(t){e.setLanguage($(t.currentTarget).val())})),this.uiModal.find(".timezones").on("change",(function(t){e.setTimezone($(t.currentTarget).val())})),this.uiModal.find(".leftnav").on("change",(function(t){e.setLeftNav($(t.currentTarget).val())})),this.uiModal.find(".homeworld").on("change",(function(t){e.setHomeWorld($(t.currentTarget).val())})),this.uiModal.find(".btn-green").on("click",(function(e){t.success("Settings Saved","Refreshing site, please wait..."),location.reload(!0)}))}},{key:"getLocalStorageSetting",value:function(e,t){return localStorage.getItem(e)||t}},{key:"setLocalStorageSetting",value:function(e,t){localStorage.setItem(e,t),o.set(e,t,{expires:365,path:"/",sameSite:"none",secure:!0})}},{key:"setServer",value:function(e){this.setLocalStorageSetting(this.storageKeyServer,e)}},{key:"getServer",value:function(){return this.getLocalStorageSetting(this.storageKeyServer,null)}},{key:"setLanguage",value:function(e){this.setLocalStorageSetting(this.storageKeyLanguage,e)}},{key:"getLanguage",value:function(){return this.getLocalStorageSetting(this.storageKeyLanguage,this.defaultLanguage)}},{key:"getGameDataSource",value:function(){return"chs"===this.getLanguage()?"https://cafemaker.wakingsands.com":"https://xivapi.com"}},{key:"setTimezone",value:function(e){this.setLocalStorageSetting(this.storageKeyTimezone,e)}},{key:"getTimezone",value:function(){return this.getLocalStorageSetting(this.storageKeyTimezone,this.defaultTimezone)}},{key:"setLeftNav",value:function(e){this.setLocalStorageSetting(this.storageKeyLeftNav,e)}},{key:"getLeftNav",value:function(){return this.getLocalStorageSetting(this.storageKeyLeftNav,this.defaultLeftNav)}},{key:"setHomeWorld",value:function(e){this.setLocalStorageSetting(this.storageKeyHomeWorld,e)}},{key:"getHomeWorld",value:function(){return this.getLocalStorageSetting(this.storageKeyHomeWorld,this.defaultHomeWorld)}}])&&i(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}());function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const l=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,(r=[{key:"watch",value:function(){$(".home-nav button").on("click",(function(e){var t=$(e.currentTarget).attr("data-tab");$(".home-tab.open").removeClass("open"),$("#"+t).addClass("open")}))}}])&&c(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}());function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const d=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,(r=[{key:"watchForMenuClassToggle",value:function(e,t){e.on("click",(function(e){window.scrollTo(0,0),t.toggleClass("open")}))}},{key:"watchForMouseOut",value:function(e,t){$(document).mouseup((function(r){if(!e.is(r.target)&&0===e.has(r.target).length)return e.removeClass("open"),void 0===t?null:t()}))}}])&&u(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}());function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const f=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uiButtonMenu=$(".btn-menu"),this.uiViewMenu=$(".site-menu")}var t,r;return t=e,(r=[{key:"watch",value:function(){d.watchForMenuClassToggle(this.uiButtonMenu,this.uiViewMenu),d.watchForMouseOut(this.uiViewMenu)}}])&&h(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}());function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const m=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uiButton=$(".user-btn"),this.uiMenu=$(".user-menu")}var t,r;return t=e,(r=[{key:"watch",value:function(){var e=this;this.uiButton.on("click",(function(t){e.uiMenu.toggleClass("open")})),$(document).mouseup((function(t){var r=e.uiButton,n=e.uiMenu;r.is(t.target)||0!==r.has(t.target).length||n.is(t.target)||0!==n.has(t.target).length||e.uiMenu.removeClass("open")}))}}])&&g(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}());function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const v=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,(r=[{key:"getItemCategories",value:function(e,t){var r="/data/categories_[lang].js".replace("[lang]",e);fetch(r,{mode:"cors"}).then((function(e){return e.json()})).then(t)}},{key:"getItemPrices",value:function(e,t,r){var n=mog.url_item_price.replace("-server-",e).replace("-id-",t);fetch(n,{mode:"cors"}).then((function(e){return e.text()})).then(r)}},{key:"getItemHistory",value:function(e,t,r){var n=mog.url_item_history.replace("-server-",e).replace("-id-",t);fetch(n,{mode:"cors"}).then((function(e){return e.text()})).then(r)}},{key:"getItemPricesCrossWorld",value:function(e,t,r){var n=mog.url_item_cross_world.replace("-server-",e).replace("-id-",t);fetch(n,{mode:"cors"}).then((function(e){return e.text()})).then(r)}}])&&p(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}());function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const b=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uiButton=$(".btn-market-board"),this.uiView=$(".market-board-container"),this.uiCategory=$(".market-category-container"),this.uiCategoryView=$(".market-category-view > div"),this.uiLazy=null,this.viewActive=!1,this.categories={}}var t,r;return t=e,(r=[{key:"watch",value:function(){var e=this;this.uiButton.on("click",(function(t){window.scrollTo(0,0),e.uiView.toggleClass("open")})),this.uiView.find("button").on("click",(function(t){window.scrollTo(0,0);var r=$(t.currentTarget).attr("id");e.openCategory(r)})),$(document).mouseup((function(t){var r=e.uiButton,n=e.uiView;r.is(t.target)||0!==r.has(t.target).length||n.is(t.target)||0!==n.has(t.target).length||e.uiView.removeClass("open")})),$(document).mouseup((function(t){var r=e.uiCategory;r.is(t.target)||0!==r.has(t.target).length||(e.uiCategory.removeClass("open"),e.viewActive=!1)})),$(document).mouseup((function(t){var r=e.uiCategoryView.parent();r.is(t.target)||0!==r.has(t.target).length||(e.uiCategoryView.parent().removeClass("open"),e.viewActive=!1)})),this.uiCategory.find(".market-category").on("click","a",(function(t){e.uiCategory.find(".market-category").html('<div class="loading"><img src="/i/svg/loading2.svg"></div>')})),$("aside .nav-box button").on("click",(function(t){var r=$(t.currentTarget).attr("id"),n=e.categories[r];e.uiCategoryView.parent().addClass("open"),e.uiCategoryView.html(""),e.uiCategoryView.append('<div class="gap"></div>'),n.forEach((function(t){var r=t[0],n=t[1],a="https://xivapi.com"+t[2],i=t[3],o=t[4],s=mog.url_item.replace("-id-",r),c=t[5];e.uiCategoryView.append('<a href="'.concat(s,'" class="rarity-').concat(o,'">\n                        <span>\n                            <img src="https://xivapi.com/mb/loading.svg" class="lazy" data-src="').concat(a,'">\n                        </span>\n                        <span>\n                            <div><span class="item-level">').concat(i,"</span> ").concat(n,"</div>\n                            <small>").concat(c,"</small>\n                        </span>\n                    </a>"))})),e.uiCategoryView.append('<div class="gap"></div>'),e.uiCategoryView.append('<div class="gap"></div>');var a=$(".lazy").Lazy({scrollDirection:"vertical",appendScroll:$(".item-category-list2"),effect:"fadeIn",visibleOnly:!1,bind:"event"});new SimpleBar(document.getElementById("item-category-list2")).getScrollElement().addEventListener("scroll",(function(e){a.data("plugin_lazy").update()}))}))}},{key:"loadCategories",value:function(){var e=this;v.getItemCategories(s.getLanguage(),(function(t){e.categories=t}))}},{key:"openCategory",value:function(e){var t=this;this.uiView.removeClass("open"),this.uiCategory.addClass("open"),this.uiCategory.find(".market-category").html("");var r=cats[e],n=this.categories[e],a=[];n.forEach((function(e){var t=e[0],r=e[1],n="https://xivapi.com"+e[2],i=e[3],o=e[4],s=mog.url_item.replace("-id-",t);a.push('<a href="'.concat(s,'" class="rarity-').concat(o,'">\n                    <span class="item-icon"><img src="http://xivapi.com/mb/loading.svg" class="lazy" data-src="').concat(n,'"></span>\n                    <span class="item-level">').concat(i,"</span>\n                    ").concat(r,"\n                </a>"))})),this.uiCategory.find(".market-category").html('\n            <div class="item-category-header">\n                <div>\n                    '.concat(r.Name," - ").concat(n.length,' items\n                </div>\n                <div>&nbsp;</div>\n            </div>\n            <div data-simplebar class="item-category-list" id="item-category-list">').concat(a.join(""),"</div>\n        ")),this.viewActive=!0,this.uiLazy=$(".lazy").Lazy({scrollDirection:"vertical",appendScroll:$(".item-category-list"),effect:"fadeIn",visibleOnly:!1,bind:"event"}),this.setSearchHeight(),new SimpleBar(document.getElementById("item-category-list")).getScrollElement().addEventListener("scroll",(function(e){t.uiLazy.data("plugin_lazy").update()}))}},{key:"setSearchHeight",value:function(){if(this.viewActive){var e=$(".item-category-list"),t=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-260;e.css({height:"".concat(t,"px")})}}},{key:"setLoadingLazyLoadWatcher",value:function(){var e=this;new SimpleBar(document.getElementById("item-category-list")).getScrollElement().addEventListener("scroll",(function(t){e.uiLazy.data("plugin_lazy").update()}))}}])&&y(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}());function _(e,t){if(e){if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,(r=[{key:"formatExtendedHistory",value:function(e,t){var r,n=function(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.entries).map((function(e){return{hq:!!e.hq,date:1e3*e.timestamp,value:Math.ceil(e.pricePerUnity),qty:Math.ceil(e.quantity?e.quantity:1)}})),a=[],i=[],o=[],s=[],c=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_(e))){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}(n);try{for(c.s();!(r=c.n()).done;){var l=r.value,u=l.hq?a:i,d=l.hq?o:s;u[l.date]?(u[l.date][1]+=l.value,d[l.date][1]+=l.qty):(u[l.date]=[l.date,l.value],d[l.date]=[l.date,l.qty])}}catch(e){c.e(e)}finally{c.f()}return a.sort((function(e,t){return e[0]-t[0]})),i.sort((function(e,t){return e[0]-t[0]})),o.sort((function(e,t){return e[0]-t[0]})),s.sort((function(e,t){return e[0]-t[0]})),{series:[{id:"HC_History_HQ",name:t.hqPpu,data:a,yAxis:0,showInNavigator:!0,negativeColor:!0,navigatorOptions:{type:"line",color:"rgba(202,200,68,0.35)"}},{id:"HC_History_NQ",name:t.nqPpu,data:i,yAxis:0,showInNavigator:!0,negativeColor:!0,navigatorOptions:{type:"line",color:"rgba(120,120,120,0.35)"}},{id:"HC_History_HQ_volume",name:t.hqPpuQuantity,data:o,linkedTo:"HC_History_HQ",type:"column",yAxis:1,showInNavigator:!1},{id:"HC_History_NQ_volume",name:t.nqPpuQuantity,data:s,linkedTo:"HC_History_NQ",type:"column",yAxis:1,showInNavigator:!1}]}}}])&&k(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}());const j=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,(r=[{key:"get",value:function(e,t,r){t=t||{},e=e+"?"+Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&"),fetch("https://cafemaker.wakingsands.com".concat(e),{mode:"cors"}).then((function(e){return e.json()})).then(r)}},{key:"fuse",value:function(e){var t;return function(r){if(t){var n=t;r.Results.forEach((function(e){n.Results.find((function(t){return t.ID===e.ID}))||n.Results.push(e)})),n.Pagination.Results=n.Results.length,n.Pagination.ResultsTotal=n.Results.length,e(n)}else t=r}}},{key:"search",value:function(e,t){var r=this.fuse(t),n={indexes:"item",filters:"ItemSearchCategory.ID>=1",columns:"ID,Icon,Name,LevelItem,Rarity,ItemSearchCategory.Name,ItemSearchCategory.ID,ItemKind.Name",string:e.trim(),limit:100,sort_field:"LevelItem",sort_order:"desc"},a=I({},n);this.get("/search",n,r),this.get("/search",a,r)}},{key:"searchLimited",value:function(e,t){var r=this.fuse(t),n={indexes:"item",filters:"ItemSearchCategory.ID>=1",columns:"ID,Name",string:e.trim(),limit:10},a=I({},n);this.get("/search",n,r),this.get("/search",a,r)}},{key:"searchCharacter",value:function(e,t,r){this.get("/character/search",{name:e,server:t},r)}},{key:"getCharacter",value:function(e,t){this.get("/character/".concat(e),{},t)}},{key:"characterVerification",value:function(e,t,r){this.get("/character/".concat(e,"/verification"),{token:t},r)}},{key:"getItem",value:function(e,t){this.get("/Item/".concat(e),{},t)}},{key:"getServerList",value:function(e){fetch("https://universalis.app/json/dc.json",{mode:"cors"}).then((function(e){return e.json()})).then(e)}},{key:"getMarketPrices",value:function(e,t,r){var n={columns:"Prices,Item",servers:t};this.get("/market/item/".concat(e),n,r)}}])&&O(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}());function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const R=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,(r=[{key:"get",value:function(e,t,r){(t=t||{}).language=s.getLanguage(),e=e+"?"+Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&"),fetch("https://xivapi.com".concat(e),{mode:"cors"}).then((function(e){return e.json()})).then(r)}},{key:"fuse",value:function(e){var t;return function(r){if(t){var n=t;r.Results.forEach((function(e){n.Results.find((function(t){return t.ID===e.ID}))||n.Results.push(e)})),n.Pagination.Results=n.Results.length,n.Pagination.ResultsTotal=n.Results.length,e(n)}else t=r}}},{key:"search",value:function(e,t){var r=this.fuse(t),n={indexes:"item",filters:"ItemSearchCategory.ID>=1",columns:"ID,Icon,Name,LevelItem,Rarity,ItemSearchCategory.Name,ItemSearchCategory.ID,ItemKind.Name",string:e.trim(),limit:100,sort_field:"LevelItem",sort_order:"desc"},a=P(P({},n),{},{string_algo:"fuzzy"});this.get("/search",n,r),this.get("/search",a,r)}},{key:"searchLimited",value:function(e,t){var r=this.fuse(t),n={indexes:"item",filters:"ItemSearchCategory.ID>=1",columns:"ID,Name",string:e.trim(),limit:10},a=P(P({},n),{},{string_algo:"fuzzy"});this.get("/search",n,r),this.get("/search",a,r)}},{key:"searchCharacter",value:function(e,t,r){this.get("/character/search",{name:e,server:t},r)}},{key:"getCharacter",value:function(e,t){this.get("/character/".concat(e),{},t)}},{key:"characterVerification",value:function(e,t,r){this.get("/character/".concat(e,"/verification"),{token:t},r)}},{key:"getItem",value:function(e,t){this.get("/Item/".concat(e),{},t)}},{key:"getServerList",value:function(e){fetch("https://universalis.app/json/dc.json",{mode:"cors"}).then((function(e){return e.json()})).then(e)}},{key:"getMarketPrices",value:function(e,t,r){var n={columns:"Prices,Item",servers:t};this.get("/market/item/".concat(e),n,r)}}])&&A(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}());function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const E=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uiInput=$("input.search"),this.uiView=$(".search-results-container"),this.loading=$(".search-loading"),this.uiLazy=null,this.searchTerm=null}var t,r;return t=e,(r=[{key:"watch",value:function(){var e=this;this.uiInput.on("keyup",(function(t){e.uiView.removeClass("open"),e.uiInput.removeClass("complete");var r="chs"===s.getLanguage(),n=$(t.currentTarget).val().trim();if(0===n.length?e.uiInput.removeClass("typing"):e.uiInput.addClass("typing"),0===n.length)return e.searchTerm="",void e.uiView.removeClass("open");e.searchTerm=$(t.currentTarget).val().trim(),e.uiView.addClass("open"),13===t.keyCode&&(e.loading.addClass("on"),(r?j:R).search(n,(function(t){e.loading.removeClass("on"),e.render(t)})))})),d.watchForMouseOut(this.uiView,(function(){e.uiInput.removeClass("complete typing")})),$(window).on("resize",(function(t){e.setSearchHeight()}))}},{key:"render",value:function(e){var t=this;window.scrollTo(0,0),this.uiInput.removeClass("typing"),this.uiInput.addClass("complete");var r=[];e.Results.forEach((function(e){var t=mog.url_item.replace("-id-",e.ID);r.push('<a href="'.concat(t,'" class="rarity-').concat(e.Rarity,'">\n                    <span class="item-icon"><img src="http://xivapi.com/mb/loading.svg" class="lazy" data-src="').concat(s.getGameDataSource()).concat(e.Icon,'"></span>\n                    <span class="item-level">').concat(e.LevelItem,"</span>\n                    ").concat(e.Name,'\n                    <span class="item-category">').concat(e.ItemSearchCategory.Name,"</span>\n                </a>"))})),this.uiView.find(".search-results").html('\n            <div class="item-search-header">\n                <div>\n                    Found '.concat(e.Pagination.Results," / ").concat(e.Pagination.ResultsTotal," for <strong>").concat(this.searchTerm,'</strong>\n                </div>\n                <div>\n                </div>\n            </div>\n            <div data-simplebar class="item-search-list" id="item-search-list">').concat(r.join(""),"</div>\n        ")),this.uiLazy=$(".lazy").Lazy({scrollDirection:"vertical",appendScroll:$(".item-search-list"),effect:"fadeIn",visibleOnly:!1,bind:"event"}),this.setSearchHeight(),new SimpleBar(document.getElementById("item-search-list")).getScrollElement().addEventListener("scroll",(function(e){t.uiLazy.data("plugin_lazy").update()})),this.uiView.addClass("open")}},{key:"setSearchHeight",value:function(){if(this.searchTerm){var e=$(".item-search-list"),t=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-260;e.css({height:"".concat(t,"px")})}}}])&&x(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}());function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const M=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,(r=[{key:"start",value:function(e){e.attr("data-text",e.html()),e.addClass("loading_interaction"),e.prop("disabled",!0),e.css({"min-width":"".concat(e.outerWidth(),"px"),"min-height":"".concat(e.outerHeight(),"px"),display:"inline-block"}),e.html("&nbsp;")}},{key:"finish",value:function(e){var t=e.attr("data-text");e.removeClass("loading_interaction"),e.prop("disabled",!1),e.html(t)}},{key:"disable",value:function(e,t){e.attr("data-text",e.html()),e.removeClass("loading_interaction"),e.prop("disabled",!0),e.html(t)}}])&&F(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}());function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const D=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uiButtons=$(".product .item_nav"),this.uiTabs=$(".product .tab"),this.uiCategory=$(".product .product-search-cat"),this.uiUpdate=$(".btn_update")}var r,n;return r=e,(n=[{key:"watch",value:function(){var e=this;this.uiButtons.find("button").on("click",(function(t){var r=$(t.currentTarget).attr("data-tab");e.switchTab(t,r)})),this.uiCategory.on("click",(function(e){var t=$(e.currentTarget).attr("data-cat");b.openCategory(t)})),$(document).scroll((function(t){var r=$(document).scrollTop(),n=e.uiButtons;r>=300?n.addClass("fixed"):n.removeClass("fixed")})),$(".item_nav_mobile_toggle").on("click",(function(e){$(".item_nav").toggleClass("open")})),$(".btn_update").on("click",(function(r){M.start(e.uiUpdate),"undefined"!=typeof itemId?$.ajax({url:mog.urls.items.update.replace("-id-",itemId),success:function(e){t.success("Update Status",e.message)},error:function(e,r,n){t.error("Error 8F","Could not update item! Try again later."),console.log(e,r,n)},complete:function(){M.finish(e.uiUpdate)}}):t.error("Error 6D","Some how you do not have the item id assigned")}))}},{key:"switchTab",value:function(e,t){this.uiButtons.find("button.open").removeClass("open"),this.uiTabs.find(".tab-page.open").removeClass("open"),$(e.currentTarget).addClass("open"),this.uiTabs.find(".tab-".concat(t)).addClass("open")}}])&&N(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}());function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const z=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxTriggers=15,this.deleteId=null,this.editId=null,this.alert=this.getAlertTemplate(),this.uiForm=$(".alert_form"),this.uiTriggers=$(".alert_entries"),this.uiAlerts=$(".alerts_table"),this.uiDeleteConfirm=$(".btn_alert_delete_confirm")}var r,n;return r=e,(n=[{key:"getAlertTemplate",value:function(){return{alert_item_id:"market"==mog.path?itemId:null,alert_name:null,alert_nq:null,alert_hq:null,alert_dc:null,alert_notify_discord:null,alert_notify_email:null,alert_triggers:[],alert_type:null}}},{key:"watch",value:function(){var e=this;"market"==mog.path&&(this.uiForm.on("click",".alert_trigger_add",(function(t){e.addCustomTrigger(t)})),this.uiForm.on("click",".alert_trigger_remove",(function(t){e.removeCustomTrigger(t)})),this.uiForm.on("click",".btn_create_alert",(function(t){e.saveAlert(t)})),this.uiForm.on("click",".btn_new_alert",(function(t){e.newAlert(t)})),this.uiAlerts.on("click",".btn_alert_delete",(function(t){e.deleteAlert(t)})),this.uiAlerts.on("click",".btn_alert_edit",(function(t){e.editAlert(t)})),this.loadAlerts(),this.uiDeleteConfirm.on("click",(function(t){e.deleteAlertConfirmation()})),a.add($(".alert_info"),$(".alert_info_button button")))}},{key:"addCustomTrigger",value:function(e){if(e.preventDefault(),this.alert.alert_triggers.length>=this.maxTriggers)t.error("Max Triggers Reached","You can add a maximum of ".concat(this.maxTriggers," to a single alert. Sorry!"));else{var r={id:Math.floor(99999*Math.random()+1),alert_trigger_field:this.uiForm.find("#alert_trigger_field").val().trim(),alert_trigger_op:this.uiForm.find("#alert_trigger_op").val().trim(),alert_trigger_value:this.uiForm.find("#alert_trigger_value").val().trim()};this.addCustomTriggerVisual(r,!0)}}},{key:"addCustomTriggerVisual",value:function(e,r){if(0!==e.alert_trigger_value.length){var n=e.alert_trigger_field.split("_")[0];if(r){if(null==this.alert.alert_type)this.alert.alert_type=n;else if(n!=this.alert.alert_type)return void t.error("Mismatch Data Types","You cannot mix Prices or History triggers in the same alert.");if(["Prices_IsCrafted","Prices_IsHQ","Prices_HasMateria","History_IsHQ"].indexOf(e.alert_trigger_field)>-1){if(-1===["0","1"].indexOf(e.alert_trigger_value))return void t.error("Invalid Condition Value","For the selected trigger field, <br> your trigger value must either be: <br> a 0 (False/No) OR a 1 (True/Yes).");if(-1===["5","6"].indexOf(e.alert_trigger_op))return void t.error("Invalid Operator","For the selected trigger field, <br> your trigger operator must be either: <br> = Equal-to OR != Not equal-to")}}this.alert.alert_triggers.push(e),this.uiTriggers.append('\n            <div id="custom_trigger_'.concat(e.id,'">\n                <div><button type="button" class="alert_trigger_remove small" data-id="').concat(e.id,'"><i class="xiv-NavigationClose"></i></button></div>\n                <div>\n                    <code>\n                        <span>').concat(e.alert_trigger_field,"</span>\n                        <em>").concat(alert_trigger_operators[e.alert_trigger_op],":</em>\n                        <strong>").concat(e.alert_trigger_value,"</strong>\n                    </code>\n                </div>\n            </div>\n        "))}else t.error("Invalid Condition Value","The triggers condition value is empty.")}},{key:"removeCustomTrigger",value:function(e){var t=this,r=$(e.currentTarget).attr("data-id");this.uiForm.find("#custom_trigger_".concat(r)).remove(),this.alert.alert_triggers.forEach((function(e,n){e.id==r&&t.alert.alert_triggers.splice(n,1)})),0===this.alert.alert_triggers.length&&(this.alert.alert_type=null)}},{key:"saveAlert",value:function(e){var r=this;if(e.preventDefault(),this.alert.alert_name=this.uiForm.find("#alert_name").val().trim(),this.alert.alert_nq=this.uiForm.find("#alert_nq").prop("checked"),this.alert.alert_hq=this.uiForm.find("#alert_hq").prop("checked"),this.alert.alert_dc=this.uiForm.find("#alert_dc").prop("checked"),this.alert.alert_notify_discord=this.uiForm.find("#alert_notify_discord").prop("checked"),this.alert.alert_notify_email=this.uiForm.find("#alert_notify_email").prop("checked"),this.alert.alert_dps_perk=this.uiForm.find("#alert_dps_perk").prop("checked"),this.alert.alert_name.length<3||this.alert.alert_name.length>100)t.error("Name Length","Please keep your alert name <br> between 4 and 100 characters");else if(!1!==this.alert.alert_hq||!1!==this.alert.alert_nq)if(!1!==this.alert.alert_notify_discord||!1!==this.alert.alert_notify_email)if(0!==this.alert.alert_triggers.length){var n=this.uiForm.find(".btn_create_alert");M.start(n);var a=this.editId?mog.urls.alerts.update.replace("-id-",this.editId):mog.urls.alerts.create;$.ajax({url:a,type:"POST",dataType:"json",data:JSON.stringify(this.alert),contentType:"application/json",success:function(e){r.loadAlerts();var n=e[0],a=e[1];if(a.length<1&&(a="(No response message)"),n)return t.success("Alert Saved",a),void r.loadAlerts();t.success("Alert not created","Could not create alert, reason: ".concat(a))},error:function(e,r,n){t.error("Error 23","Could not create the alert. Ask Vek why!"),console.log("--- ERROR ---"),console.log(e,r,n)},complete:function(){M.finish(n)}})}else t.error("No Triggers","You have not set any triggers <br> on your alert, fix that!");else t.error("Error: Notification","You must choose to be notified <br> either by discord or by email.");else t.error("Error: HQ/NQ","You must choose either: <br> Normal Quality, High-Quality or Both.")}},{key:"loadAlerts",value:function(){var e=this;!1!==mog.isOnline&&$.ajax({url:mog.urls.alerts.renderForItem.replace("-id-",itemId),success:function(t){e.uiAlerts.html(t),a.add($(".alert_delete_confirmation_modal"),$(".btn_alert_delete"))},error:function(t,r,n){e.uiAlerts.html('<div class="alert-red">Could not load any alerts for this item.</div>'),console.log("--- ERROR ---"),console.log(t,r,n)}})}},{key:"editAlert",value:function(e){var r=this;this.newAlert();var n=$(e.currentTarget);this.editId=n.attr("data-id"),M.start(n),this.toggleAlertFormLoading(!0),$.ajax({url:mog.urls.alerts.edit.replace("-id-",this.editId),type:"GET",success:function(e){r.editId=e.id,r.uiForm.find("#alert_name").val(e.alert_name),r.uiForm.find("#alert_nq").prop("checked",e.alert_nq),r.uiForm.find("#alert_hq").prop("checked",e.alert_hq),r.uiForm.find("#alert_dc").prop("checked",e.alert_dc),r.uiForm.find("#alert_notify_discord").prop("checked",e.alert_notify_discord),r.uiForm.find("#alert_notify_email").prop("checked",e.alert_notify_email),r.uiForm.find("#alert_dps_perk").prop("checked",e.alert_dps_perk),r.alert.alert_name=e.alert_name,r.alert.alert_nq=e.alert_nq,r.alert.alert_hq=e.alert_hq,r.alert.alert_dc=e.alert_dc,r.alert.alert_notify_discord=e.alert_notify_discord,r.alert.alert_notify_email=e.alert_notify_email,r.alert.alert_dps_perk=e.alert_dps_perk,e.triggers.forEach((function(e,t){r.addCustomTriggerVisual({id:Math.floor(99999*Math.random()+1),alert_trigger_field:e[0],alert_trigger_op:e[1],alert_trigger_value:e[2]})})),$(".alert_form").addClass("edit_mode")},error:function(e,r,n){t.error("Error 8456","Could not fetch alert to edit."),console.log("--- ERROR ---"),console.log(e,r,n)},complete:function(){M.finish(n),r.toggleAlertFormLoading(!1)}})}},{key:"deleteAlert",value:function(e){this.deleteId=$(e.currentTarget).attr("data-id");var t=$(e.currentTarget).parents("tr").attr("data-name");$(".alert_delete_confirmation_modal").find("h1").html(t)}},{key:"deleteAlertConfirmation",value:function(){var e=this,r=mog.urls.alerts.delete.replace("-id-",this.deleteId);M.start(this.uiDeleteConfirm),this.newAlert(),$.ajax({url:r,type:"GET",success:function(r){e.loadAlerts(),t.success("Alert Deleted","This alert has been deleted")},error:function(e,r,n){t.error("Error 75","Could not delete alert."),console.log("--- ERROR ---"),console.log(e,r,n)},complete:function(){M.finish(e.uiDeleteConfirm),a.close($(".alert_delete_confirmation_modal"))}})}},{key:"newAlert",value:function(){$(".alert_form").removeClass("edit_mode"),this.deleteId=null,this.editId=null,this.alert=this.getAlertTemplate(),this.uiForm.find("#alert_name").val(""),this.uiForm.find("#alert_nq").prop("checked",!1),this.uiForm.find("#alert_hq").prop("checked",!1),this.uiForm.find("#alert_dc").prop("checked",!1),this.uiForm.find("#alert_notify_discord").prop("checked",!1),this.uiForm.find("#alert_notify_email").prop("checked",!1),this.uiForm.find("#alert_dps_perk").prop("checked",!1),this.uiTriggers.html(""),this.uiForm.find("#alert_trigger_field option:first").prop("selected",!0),this.uiForm.find("#alert_trigger_op option:first").prop("selected",!0),this.uiForm.find("#alert_trigger_value").val("")}},{key:"toggleAlertFormLoading",value:function(e){var t=$(".alert-form-loading");e?t.addClass("show"):t.removeClass("show")}}])&&H(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}()),B=[1e3,"Could not add item to favourites."],V=[1001,"Could not create a new list."],q=[1002,"Could not add item to list."],U=[1003,"Could not remove item from list."];function K(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const Q=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,n;return r=e,(n=[{key:"get",value:function(e,t,r,n,a){this.handleAjax("GET",e,t,r,n,a)}},{key:"post",value:function(e,t,r,n,a){this.handleAjax("GET",e,t,r,n,a)}},{key:"handleAjax",value:function(e,r,n,a,i,o){$.ajax({url:r,type:e,data:n,success:a,complete:i,error:function(e,r,n){t.error("Error ".concat(o[0]),o[1]),console.error(e,r,n)}})}}])&&K(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}());function W(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const Y=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uiModal=$(".list_modal"),this.uiModalButton=$(".btn_addto_list"),this.uiFaveButton=$(".btn_addto_fave"),this.uiCreateForm=$(".create_list_form"),this.uiListsView=$(".user_lists")}var r,n;return r=e,(n=[{key:"watch",value:function(){var e=this;a.add(this.uiModal,this.uiModalButton),this.loadLists(),this.uiCreateForm.on("submit",(function(t){t.preventDefault(),e.create(e.uiCreateForm.find("#list_name").val().trim(),itemId)})),this.uiCreateForm.on("click",".user_list_existing_button",(function(t){var r=$(t.currentTarget).attr("data-id");"add"==$(t.currentTarget).attr("data-action")?e.addItem(r,itemId):e.removeItem(r,itemId)})),this.uiFaveButton.on("click",(function(t){e.addToFavourite()}))}},{key:"loadLists",value:function(){var e=this,t={itemId};Q.get(mog.urls.lists.render,t,(function(t){e.uiListsView.html(t)}))}},{key:"addToFavourite",value:function(){var e=this;M.start(this.uiFaveButton);var r={itemId};Q.post(mog.urls.lists.favourite,r,(function(r){r.state?e.uiFaveButton.addClass("on"):e.uiFaveButton.removeClass("on"),e.uiFaveButton.find("span").text(r.state?"Faved":"Favourite"),a.close(e.uiModal),t.success(r.state?"Added to Favourites":"Removed from Favourites",r.state?"Added to your favourites.":"Removed from your favourites."),e.loadLists()}),(function(){M.finish(e.uiFaveButton)}),B)}},{key:"create",value:function(e,r){var n=this,i=this.uiCreateForm.find('button[type="submit"]');if(M.start(i),e.length<3)t.error("name too short","Your list name is a bit too short, please enter in a name to create a list!");else{var o={name:e,itemId:r};Q.post(mog.urls.lists.create,o,(function(e){n.loadLists(),a.close(n.uiModal),t.success("Created list","Your new list has been created and the item added to it!")}),(function(){M.finish(i)}),V)}}},{key:"addItem",value:function(e,r){var n=this;this.uiListsView.html('<div align="center"><img src="/i/svg/loading3.svg" height="32"></div>');var i={itemId:r};Q.post(mog.urls.lists.addItem.replace("-id-",e),i,(function(e){n.loadLists(),a.close(n.uiModal),t.success("Added to list","Your item has been saved to this list!")}),null,q)}},{key:"removeItem",value:function(e,r){var n=this;this.uiListsView.html('<div align="center"><img src="/i/svg/loading3.svg" height="32"></div>');var i={itemId:r};Q.post(mog.urls.lists.removeItem.replace("-id-",e),i,(function(e){n.loadLists(),a.close(n.uiModal),t.success("Removed from list","Item has been removed from the list.")}),null,U)}}])&&W(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}());function G(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const J=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uiAddCharacterResponse=$(".character_add_response")}var r,n;return r=e,(n=[{key:"watch",value:function(){"account"==mog.path&&this.handleNewCharacterSearch()}},{key:"handleNewCharacterSearch",value:function(){var e=this,r=$(".character_add");r.on("click",(function(n){var a={string:$("#character_string").val().trim(),server:$("#character_server").val().trim()},i=null;if(a.string.indexOf("finalfantasyxiv.com")>-1&&(a.string=a.string.split("/"),a.string=a.string[5],i=a.string),-1==a.string.indexOf(" ")&&(i=a.string),0!=a.string.length)if(M.start(r),i)e.handleNewCharacterViaLodestoneId(i);else{var o=a.string.split(" ");e.uiAddCharacterResponse.html("Searching Lodestone for your character..."),fetch("/lodestone/search/character/".concat(a.server,"/").concat(o[0],"/").concat(o[1])).then((function(e){return e.json()})).then((function(t){return e.handleNewCharacterViaLodestoneId(t.id)})).catch((function(n){t.error("Not Found (code 8)","Could not find your character on Lodestone, try entering the Lodestone URL for your character."),M.finish(r),e.uiAddCharacterResponse.html("")}))}else t.error("Nothing entered?","I think you forgot to type something...")}))}},{key:"handleNewCharacterViaLodestoneId",value:function(e,r){var n=this,a=$(".character_add");this.uiAddCharacterResponse.html("Searching Lodestone for your character..."),fetch("/lodestone/character/".concat(e)).then((function(e){return e.json()})).then((function(r){n.uiAddCharacterResponse.html("Character found, verifying auth code.");var i=r.bio.search(verify_code);if(console.log(i),-1===i)return t.error("Auth Code Not Found","Could not find your auth code (".concat(verify_code,") on your characters profile, try again!")),n.uiAddCharacterResponse.html(""),void M.finish(a);n.uiAddCharacterResponse.html("Auth code found, adding character..."),$.ajax({url:mog.urls.characters.add.replace("-id-",e),success:function(e){if(!0===e)return t.success("Character Added!","Your character has been added, the page will refresh in 3 seconds."),t.setForcedOpen(!0),void setTimeout((function(){location.reload()}),3e3);t.error("Character failed to add","Error: ".concat(e.Message))},error:function(e,r,n){t.error("Something Broke (code 145)","Could not add your character, please hop on Discord and complain to Kara"),console.error(e,r,n)},complete:function(){n.uiAddCharacterResponse.html(""),M.finish(a)}})})).catch((function(e){t.error("Character failed to add","Error: ".concat(e))}))}}])&&G(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}());function X(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const Z=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stateAdding=!1,this.uiAddRetainerResponse=$(".retainer_add_response"),this.uiItemSearchResponse=$(".retainer_item_search_response")}var r,n;return r=e,(n=[{key:"watch",value:function(){"account"==mog.path&&(this.handleNewRetainerAdd(),this.watchItemSearchInput(),this.watchRetainerConfirmation())}},{key:"watchRetainerConfirmation",value:function(){var e=$(".retainer_confirm");e.on("click",(function(r){M.start(e);var n=$(r.currentTarget).attr("data-id");$.ajax({url:mog.urls.retainers.confirm.replace("-id-",n),success:function(e){var r=e[0],n=e[1];n.trim().length<1&&(n="Could not add your retainer, the Companion Servers may be having issues. Please try again soon or contact the discord"),0!=r?(t.success("Retainer Confirmed!","You are all good to go, the retainer is yours! <br> The site will refresh in 3 seconds."),t.setForcedOpen(!0),setTimeout((function(){location.reload()}),3e3)):t.error("Not yet!",n)},error:function(e,t,r){console.error(e,t,r)},complete:function(){M.finish(e),M.disable(e)}})}))}},{key:"watchItemSearchInput",value:function(){var e=this,t=$(".retainer_item_search"),r=null,n=null;t.on("keyup",(function(a){var i=t.val().trim();clearTimeout(r),i.length<2||i==n||(e.uiItemSearchResponse.html('<div align="center"><img src="/i/svg/loading3.svg" height="32"></div>'),r=setTimeout((function(){R.searchLimited(i,(function(t){n=i,null!=t&&0!=t.Pagination.Results?(e.uiItemSearchResponse.html(""),t.Results.forEach((function(t){e.uiItemSearchResponse.append('<button class="item_button" data-id="'.concat(t.ID,'">').concat(t.Name,"</button>"))}))):e.uiItemSearchResponse.html("<p>Could not find an item</p>")}))}),250))})),this.uiItemSearchResponse.on("click","button",(function(t){var r=$(t.currentTarget).attr("data-id"),n=$(t.currentTarget).text();$(".retainer_item_search").val(n),$(".retainer_add").prop("disabled",!1),$("#retainer_item").val(r),e.uiItemSearchResponse.html("")}))}},{key:"handleNewRetainerAdd",value:function(){var e=this,r=$(".retainer_add");r.on("click",(function(n){if(!e.stateAdding){var a={name:$("#retainer_string").val().trim(),server:$("#retainer_server").val().trim(),itemId:$("#retainer_item").val().trim()};a.name.length<2?t.error("No name?","is your retainer name really below 2 characters?"):(M.start(r),e.stateAdding=!0,$.ajax({url:mog.urls.retainers.add,data:a,success:function(e){if(!0===e)return t.success("Retainer Added!","Your retainer has been added, the page will refresh in 3 seconds."),t.setForcedOpen(!0),void setTimeout((function(){location.reload()}),3e3);t.error("Retainer failed to add","Error: ".concat(e.Message))},error:function(e,r,n){t.error("Something Broke (code 148)","Could not add your retainer, please hop on discord!"),console.error(e,r,n)},complete:function(){e.stateAdding=!1,e.uiAddRetainerResponse.html(""),M.finish(r)}}))}}))}}])&&X(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}());function ee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const te=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,n;return r=e,(n=[{key:"watch",value:function(){"account"==mog.path&&(this.handlePatreonStatusCheck(),this.handlePatreonFriendAssignment())}},{key:"handlePatreonStatusCheck",value:function(){var e=$(".check_patreon_status");e.on("click",(function(r){M.start(e),$.ajax({url:mog.urls.account.check_patreon,success:function(e){e.ok?t.success("Patreon Confirmed!","Your support is much appreciated. Refresh the site to see the changes :) - Thank you"):t.error("There was a problem (code: 22)","Could not detect Patreon status, please make sure you are in the XIVAPI Admin and have accepted your Discord Reward on Patreon, if you have problems, message Miu on Discord.")},error:function(e,r,n){t.error("There was a problem (code: 47)","Please jump on discord and message Miu with the error code to sort this out! Thank you"),console.error(e,r,n)},complete:function(){M.finish(e)}})}))}},{key:"handlePatreonFriendAssignment",value:function(){$(".pat-friend-promote button").on("click",(function(e){var r=$(e.target),n=r.attr("id");M.start(r),$.ajax({url:"/account/patreon/perks/benefit",data:{id:n},success:function(e){10===e&&t.success("All Good!","This member now has benefit patreon features!"),20===e&&t.success("All Good!","This users patreon benefits status has been removed."),r.after("<p></p>"),r.remove()},error:function(e,r,n){var a=e.responseJSON;t.error("Error",a.Message)},complete:function(){M.finish(r)}}),console.log(n)}))}}])&&ee(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}());function re(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,(r=[{key:"get",value:function(e,t,r){t=t||{},e=e+"?"+Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&"),fetch("https://universalis.app/api".concat(e)).then((function(e){return e.json()})).then(r)}},{key:"extendedHistory",value:function(e,t,r){this.get("/history/".concat(e,"/").concat(t),null,r)}}])&&re(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()),s.init(),s.watch(),m.watch(),f.watch(),b.watch(),b.loadCategories(),E.watch(),l.watch(),"undefined"!=typeof appEnableItemPage&&1===appEnableItemPage&&(D.watch(),z.watch(),Y.watch()),te.watch(),"undefined"!=typeof appEnableCharacters&&1===appEnableCharacters&&J.watch(),"undefined"!=typeof appEnableRetainers&&1===appEnableRetainers&&Z.watch()})()})();